$(function(){function b(a){var b={};"trueName"==a?b={require:"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a",minLength:"\u59d3\u540d\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e1",maxLength:"\u59d3\u540d\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e8"}:"schoolName"==a||"schoolId"==a?b={require:"\u8bf7\u8f93\u5165\u5e76\u9009\u62e9\u5b66\u6821"}:"educationLevel"==a?b={require:"\u8bf7\u9009\u62e9\u5b66\u5386"}:"enrolYear"==a?b={require:"\u8bf7\u9009\u62e9\u5165\u5b66\u5e74\u4efd"}:"mobile"==a?b={require:"\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a",
mobile:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u624b\u673a\u53f7"}:"idCardNo"==a?b={require:"\u8eab\u4efd\u8bc1\u4e0d\u80fd\u4e3a\u7a7a",idCardNo:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u8eab\u4efd\u8bc1"}:"weChatPhoto"==a&&(b={require:"\u8bf7\u4e0a\u4f20\u5fae\u4fe1\u622a\u56fe"});var e=$('<input type="text" class="aply-mil-hint" readonly="readonly">'),d=$(".hint"),c=$("#"+a),f=c.val();if("true"==c.attr("require")){if("schoolId"==a){a=$("#schoolName");if(""==f)return 0==a.next().size()&&a.after(e.clone()),
d.html(b.require),!1;a.next().remove()}else if("weChatPhoto"==a){a=$("#aply-uccj");if(""==f)return 0==a.next().size()&&a.after(e.clone()),d.html(b.require),!1;a.next().remove()}else{if(""==f)return 0==c.next().size()&&c.after(e.clone()),d.html(b.require),!1;c.next().remove()}d.html("")}if(c.data("mobile"))if(a=/^1\d{10}$/,a.test(f))c.next().remove(),d.html("");else return 0==c.next().size()&&c.after(e.clone()),d.html(b.mobile),!1;if(c.data("idcardno"))if(idCardNoUtil.checkIdCardNo(f))c.next().remove(),
d.html("");else return 0==c.next().size()&&c.after(e.clone()),d.html(b.idCardNo),!1;if(c.data("digits"))if(a=/^[1-9]+[0-9]*]*$/,console.log(a.test(f)),a.test(f))c.next().remove(),d.html("");else return 0==c.next().size()&&c.after(e.clone()),d.html(b.digits),!1;if(c.data("min")){if(c.data("min")>f)return 0==c.next().size()&&c.after(e.clone()),d.html(b.min),!1;c.next().remove();d.html("")}console.log(c.data("minlength"));if(c.data("minlength")){if(c.data("minlength")>f.length)return 0==c.next().size()&&
c.after(e.clone()),d.html(b.minLength),!1;c.next().remove();d.html("")}if(c.data("maxlength")){if(c.data("maxlength")<f.length)return 0==c.next().size()&&c.after(e.clone()),d.html(b.maxLength),!1;c.next().remove();d.html("")}return!0}$("#schoolName").autocomplete({source:function(a,b){$.ajax({url:"http://wlftest-api.chinacloudapp.cn/university/query",dataType:"jsonp",data:{k:a.term},success:function(a){b($.map(a,function(a){return{label:a.Name,value:a.Name,id:a.ID}}))}})},minLength:0,select:function(a,
b){$("#schoolId").val(b.item.id)}});$("#weChatPhotoUploadFile").change(function(){var a=$(this).val();a&&0<a.length&&(a=a.split("\\"),a=a[a.length-1],$("#fileName").val(a).removeClass("aply-ulfr-covr aply-ulfr-codt"))});$("input, select").blur(function(){b($(this).attr("id"))});$("#submitId").click(function(){var a=b("trueName");if(!a)return a;a=b("schoolName");if(!a)return a;a=b("schoolId");if(!a)return a;a=b("educationLevel");if(!a)return a;a=b("enrolYear");if(!a)return a;a=b("mobile");if(!a)return a;
a=b("idCardNo");if(!a)return a;a=b("weChatPhoto");if(!a)return a;$("#loading-wait").toggleClass("cover");$("#StudentForm").submit();return!1})});
var idCardNoUtil={provinceAndCitys:{11:"\u5317\u4eac",12:"\u5929\u6d25",13:"\u6cb3\u5317",14:"\u5c71\u897f",15:"\u5185\u8499\u53e4",21:"\u8fbd\u5b81",22:"\u5409\u6797",23:"\u9ed1\u9f99\u6c5f",31:"\u4e0a\u6d77",32:"\u6c5f\u82cf",33:"\u6d59\u6c5f",34:"\u5b89\u5fbd",35:"\u798f\u5efa",36:"\u6c5f\u897f",37:"\u5c71\u4e1c",41:"\u6cb3\u5357",42:"\u6e56\u5317",43:"\u6e56\u5357",44:"\u5e7f\u4e1c",45:"\u5e7f\u897f",46:"\u6d77\u5357",50:"\u91cd\u5e86",51:"\u56db\u5ddd",52:"\u8d35\u5dde",53:"\u4e91\u5357",54:"\u897f\u85cf",
61:"\u9655\u897f",62:"\u7518\u8083",63:"\u9752\u6d77",64:"\u5b81\u590f",65:"\u65b0\u7586",71:"\u53f0\u6e7e",81:"\u9999\u6e2f",82:"\u6fb3\u95e8",99:"\u5176\u4ed6"},powers:"7 9 10 5 8 4 2 1 6 3 7 9 10 5 8 4 2".split(" "),parityBit:"10X98765432".split(""),genders:{male:"\u7537",female:"\u5973"},checkAddressCode:function(b){return!/^[1-9]\d{5}$/.test(b)?!1:idCardNoUtil.provinceAndCitys[parseInt(b.substring(0,2))]?!0:!1},checkBirthDayCode:function(b){if(!/^[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))$/.test(b))return!1;
var a=parseInt(b.substring(0,4),10),g=parseInt(b.substring(4,6),10),b=parseInt(b.substring(6),10),e=new Date(a,g-1,b);return e>new Date?!1:e.getFullYear()==a&&e.getMonth()==g-1&&e.getDate()==b?!0:!1},getParityBit:function(b){for(var b=b.substring(0,17),a=0,g=0;17>g;g++)a+=parseInt(b.charAt(g),10)*parseInt(idCardNoUtil.powers[g]);return idCardNoUtil.parityBit[a%11]},checkParityBit:function(b){var a=b.charAt(17).toUpperCase();return idCardNoUtil.getParityBit(b)==a?!0:!1},checkIdCardNo:function(b){return!/^\d{15}|(\d{17}(\d|x|X))$/.test(b)?
!1:18==b.length?idCardNoUtil.check18IdCardNo(b):!1},check18IdCardNo:function(b){var a=/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(b);if(!a)return!1;a=b.substring(0,6);a=idCardNoUtil.checkAddressCode(a);if(!a)return!1;b=b.substring(6,14);a=idCardNoUtil.checkBirthDayCode(b);return!a?!1:a}};
